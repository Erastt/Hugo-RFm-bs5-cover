---
title: Добавление шрифтов
subtitle: Подключение и оптимизация шрифтов
date: 2021-06-23T16:48:05+03:00
Lastmod: 2021-06-26T16:48:05+03:00
draft: false
#description:  Шрифт понятие сложное.
summary:
author:
  given_name: G-8
  family_name: G-8
  display_name: "G-8 и @B^"
categories: [веб-разработка]
# categories: ['web development']
tags: [CSS, Шрифт]
toc: true
---

<svg class="float-start me-2 mt-2" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">
  <path fill="#9b9b9b"  d="m296 10-14.143 5.857-10 10L266 40v88l7.543 15.646 76.59 65.522-76.781 67.338L266 292v180l5.857 14.143 10 10L296 502h174l14.143-5.857 10-10L500 472V292l-7.543-15.646-78.59-67.577 80.781-61.283L502 132V40l-5.857-14.143-10-10L472 10zm10 40h156v72.51l-80.157 60.773L306 118.357V118zm76.157 184.662L460 301.642V462H306V301.49zM208.423 129.347l-.26-78.934-137.588.54-17.788 17.46-.279 389.255 13.164 4.37 142.927.028-.162-144.084-67.85.077-.024 13.864-40.016.14.035-34.093 19.898-19.956 107.886.057 20.203 20.087.072 173.82-5.865 13.997-9.885 10.056-14 5.802-156.134.143-6.57-1.046-29.956-9.813L12.5 472.152l.042-412.202 5.805-14.019 29.875-30.04 14.027-5.867 156.276.063 14.328 5.906 9.823 9.892 5.925 13.993.052 90.055-40.007.068z"/>
  <path d="m140.563 331.923-40.016.14.035-34.093 19.898-19.956 107.886.057 20.203 20.087.072 173.82-5.865 13.997-9.885 10.056-14 5.802-156.134.143-6.57-1.046-29.956-9.813L12.5 472.152l.042-412.202 5.805-14.019 29.875-30.04 14.027-5.867 156.276.063 14.328 5.906 9.823 9.892 5.925 13.993.052 90.055-40.007.068-.483-79.588-137.588.54-17.788 17.46-.279 389.255 13.164 4.37 142.927.028-.162-144.084-67.85.077zM306 50h156v72.51l-80.157 60.773L306 118.357V50M382.157 234.662 306 301.49V462h154V301.643l-77.843-66.98"/>
  <path fill="none" stroke="grey" d="m350.134 209.168-76.591-65.522L266 128V40l5.857-14.143 10-10L296 10h176l14.143 5.857 10 10L502 40v92l-7.352 15.494-80.782 61.283 78.591 67.577L500 292v180l-5.857 14.143-10 10L470 502H296l-14.143-5.857-10-10L266 472V292l7.352-15.494z"/>
</svg>

## Термины

> Шрифт _(нем. Schrift от schreiben «писать»)_ -- графический рисунок начертаний букв и знаков, составляющих единую стилистическую и композиционную систему, набор символов определённого размера и рисунка.<br>
> В узком типографском смысле шрифтом называется комплект типографских литер, предназначенных для набора текста.

> <footer class="blockquote-footer text-right"><a href="https://ru.wikipedia.org/wiki/%D0%A8%D1%80%D0%B8%D1%84%D1%82"> Шрифт. </a>
>   <cite title="Source Title">Википедия — свободной энциклопедии</cite></footer>

Текст — основная часть контента на большинстве сайтов, поэтому важно грамотно подходить к его отрисовке. В этой статье разобраны базовые моменты, касающиеся подключения и оптимизации шрифтов.

При разработке Web-страницы можно использовать различные шрифты при наборе текста.
Сразу отметим, что проще всего — вообще не подключать сторонние шрифты. Вполне достаточно стандартных, которые в большинстве операционных систем  предустановлены. Это современные шрифты: "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", а также [моноширинные](https://ru.wikipedia.org/wiki/Моноширинный_шрифт) — SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New". Все  они широко используются специалистами, поэтому  вполне  безопасны. Достаточно просто указать название одного из таких шрифтов в коде, и всё будет работать.

Однако,  дизайн макета часто требует применения нестандартных шрифтов. Новый шрифт подгружается также, как подгружаются стили и скрипты. Чтобы исключить проблемы при подключении шрифтов, необходимо уделить внимание их оптимизации. Подробно это будет рассмотрено далее.

## Подключение шрифтов с помощью Google Fonts

Есть простой и удобный способ подключить нестандартный шрифт — использовать бесплатный сервис [Google Fonts](https://fonts.google.com/). Он позволяет использовать шрифты, не сохраняя их на своём сервере. Чтобы им воспользоваться, необходимо выбрать шрифт и добавить одно или несколько нужных начертаний, а затем вставить в `<head>` ссылку, которую сгенерирует Google Fonts во вкладке Embed.

{{< figure src="/images/G-8_fonts1.png" caption="" alt="Имя" width="100%" >}}

Этого достаточно, чтобы шрифт подключился. Теперь его можно использовать в свойстве `font-family` без каких-либо дополнительных действий.

```css
body {
  font-family: "Roboto", "Arial", sans-serif;
}
```

Стоит отметить, что после основного шрифта важно указать один из стандартных. В случае, если нестандартный шрифт не загрузится, браузер воспользуется альтернативным. Его нужно подобрать максимально похожим на основной шрифт.

Плюсы этого способа — простота использования и всегда актуальные версии шрифтов, Google Fonts их часто обновляет. Но у него есть и минус — запросы к сторонним серверам могут негативно повлиять на скорость загрузки страницы. Если выбираете этот способ, стоит обратить внимание на [оптимизацию](https://csswizardry.com/2020/05/the-fastest-google-fonts/).

## Локальная установка шрифтов
Основной недостаток Google Fonts и других online сервисов заключается в том, что при недоступности сервиса, шрифты не будут подгружаться. Поэтому многие специалисты предпочитают хранить используемые на web-странице шрифты локально.
Шрифты можно скачать на [различных ресурсах](https://fontstorage.com/ru/). При этом всегда нужно обращать внимание на лицензию — некоторые шрифты могут быть недоступны для коммерческого использования.

Одним из наиболее простых и безопасных способов локальной установки шрифтов, является установка через сообщество [github](https://github.com/).

Рассмотрим  подключение нового шрифта на примере шрифта [FiraCode](https://github.com/tonsky/FiraCode).

В первую очередь, регистрируемся в сообществе [github](https://github.com/), после чего находим нужный нам шрифт (в нашем случае - FiraCode).
есть несколько способов скачать необходимый нам шрифт:
1. Нажимаем [Download Fira](https://github.com/mozilla/Fira#download-fira), после чего скачиваем себе архив со всеми необходимыми файлами.
1. Переходим со страницы [FiraCode](https://github.com/tonsky/FiraCode) в директорию [distr](https://github.com/tonsky/FiraCode/tree/master/distr) и сохраняем в своей работе файл ['fira_code.css'](https://github.com/tonsky/FiraCode/blob/master/distr/fira_code.css), а также содержимое директорий [woff](https://github.com/tonsky/FiraCode/tree/master/distr/woff) и [woff2](https://github.com/tonsky/FiraCode/tree/master/distr/woff2).

После загрузки указанных файлов необходимо включить их в свой проект. Для шрифтов принято заводить отдельную директорию — например, `fonts`. В неё следует поместить файлы для каждого используемого шрифта в нужных форматах — в большинстве случаев хватит `woff` и .`woff2` (они поддерживаются всеми современными браузерами, поэтому проблем с отображением шрифта у пользователей не возникнет).
После того, как файлы шрифтов добавлены в проект, их нужно подключить в CSS или SCSS-файле.(Копируем содержимое файла 'fira_code.css')
Например:

```css
@font-face {
  font-family: 'Fira Code';
  src: url('fonts/FiraCode-Light.woff2') format('woff2'),
    url("fonts/FiraCode-Light.woff") format("woff");
  font-weight: 300;
  font-style: normal;
}
  /* Если браузер не поддерживает woff2, загрузит woff */
```

После этого загруженные шрифты можно применять в своей работе.
Например:

```css
body {
  font-family: "Fira Code", "Arial", sans-serif;
}
```
CSS свойство `font-family` определяет перечень используемых шрифтов для отображения выбранного элемента. Принято  указывать альтернативные шрифты через запятую: `font-family: "Fira Code", Roboto, sans-serif;`. Браузер выберет из списка первый шрифт, а при невозможности его отобразить по очереди будет выбирать все последующие. [Подробнее...](https://developer.mozilla.org/ru/docs/Web/CSS/font-family)

Также можно изменить шрифт отображения текста внутри текстового редактора на новый. Например в  [Atom](https://atom.io/) это делается следующим образом:
- открыть настройки Atom ( cmd+,на Mac или ctrl+, на Linux);
- выбрать вкладку Editor;
- в поле Font Family ввести название необходимого шрифта (в нашем случае - Fira Code).

## Оптимизация

Выбор современного формата шрифта, который обладает хорошей степенью сжатия — это только первый шаг к оптимизации. Для увеличения скорости загрузки можно сделать гораздо больше. Подробнее о способах оптимизации - далее.

### FOIT, FOUT и FOFT

При [рендеринге](https://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%BD%D0%B4%D0%B5%D1%80%D0%B8%D0%BD%D0%B3) страницы можно наблюдать разное поведение текста. Основные варианты поведения текста:

- FOIT (Flash of Invisible Text) — с англ. «мелькание невидимого текста». При таком поведении, пока шрифт не загрузится, текст не отображается и появляется только после загрузки шрифта. Значительная проблема — во время загрузки нет доступа к текстовому контенту.

- FOUT (Flash of Unstyled Text) — с англ. «мелькание неоформленного текста». Во время загрузки используется шрифт, заданный по умолчанию (системный, например), а после загрузки страница перерисовывается с использованием загрузившегося шрифта. Эта перерисовка довольно заметна и может быть нежелательна.

- FOFT (Flash of Faux Text) — с англ. «мелькание синтезированного текста». Это поведение можно наблюдать в промежутке, когда основное начертание уже загрузилось, а дополнительные (жирное, курсивное и так далее) — нет. Браузер имитирует нужное начертание до загрузки настоящей версии. В этом случае страница может перерисовываться несколько раз по мере загрузки начертаний.

В разных браузерах логика рендеринга текста по умолчанию отличается. Например: Chrome и Firefox в течение трёх секунд не отрисовывают ничего, затем используют веб-безопасный шрифт, а после окончания загрузки текст перерисовывается. IE поступает похоже, но при этом не ждёт три секунды. Варианты поведения разных браузерах при рендеринге Вашей web-страницы можно задать самостоятельно, используя  свойство `font‑display`.

### Свойство font-display

Это свойство контролирует поведение браузера при рендеринге шрифтов. Всего существует пять вариантов значений:

- `auto` - поведение устанавливает браузер;
- `block`- текст не отображается в течение короткого периода (3 секунды), затем отрисовывается запасной шрифт, если основной ещё не загрузился. Как только загрузка завершается, текст перерисовывается снова;
- `swap` - сразу же отрисовывается запасной шрифт, после загрузки шрифта - повторный рендеринг;
- `fallback` - в течение очень короткого периода (100 миллисекунд) не отображается ничего, затем браузер использует запасной шрифт и ждёт 3 секунды - если шрифт всё ещё не загрузился, остаётся запасной шрифт. Далее не важно, загрузился шрифт или нет, замена не произойдёт. Если шрифт загрузится, то он применится только при обновлении страницы;
- `optional` - текст не отображается в течение 100 миллисекунд, а затем отрисовывается запасным шрифтом. Даже если шрифт загрузится после этого, замена произойдёт только при обновлении страницы.

Наиболее ораспространённые значения свойства: `swap` и `optional`.

### Предзагрузка шрифтов

Ещё один способ оптимизации — предварительная загрузка шрифтов. С её помощью можно изменить обычную приоритизацию загрузки ресурсов, тем самым сказав браузеру, что важно загрузить шрифт в первую очередь.

Стоит учесть, что браузер загрузит шрифт в любом случае — даже если он не используется на странице. И, обладая высоким приоритетом, эта загрузка может блокировать загрузку других ресурсов, поэтому нужно грамотно выбирать, что именно предзагружать. Например, если на странице используются три разных шрифта, стоит предзагрузить только основной шрифт без дополнительных начертаний.

Для того, чтобы предзагрузка сработала, нужно поместить в `<head>` ссылку на шрифт и задать атрибуту `rel` значение `preload`:

```html
<link rel="preload" href="/fonts/Roboto.woff2" as="font" />
```

Также необходимо добавить тип ресурса, в данном случае — `font`.

### Уменьшение количества глифов шрифта

По умолчанию шрифт может содержать глифы (буквы, символы) разных языков и просто редко используемые. С помощью свойства `unicode-range` можно установить диапазон нужных символов в системе Unicode, тогда браузер будет подгружать сабсет (подмножество) шрифта только в тот момент, когда на странице появится символ из этого диапазона. Предварительно нужно подготовить файлы шрифтов, разбив их на группы.

Например, можно отдельно подключить латиницу и кириллицу, если на сайте представлены версии на двух языках. И с помощью `unicode-range` браузер поймёт, какой сабсет нужен для конкретной страницы, и загрузит только его. Такой файл будет иметь меньший вес и ускорит загрузку страницы.

Также можно проанализировать, какие конкретно глифы используются на сайте и создать кастомный сабсет исключительно с ними. Для этого есть [специальные инструменты](https://github.com/filamentgroup/glyphhanger).

{{/* [Ссылка на материалы статьи](https://htmlacademy.ru/blog/boost/tutorial/fonts-loading) */}}

## Вариантивные шрифты

Наиболее современным способом оптимизации текста является использование [вариативных](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide#variable_fonts) шрифтов.
Обычный шрифт требует как минимум четыре файла: обычный, курсив, полужирный и полужирный курсив. У вариативных шрифтов все эти написания содержатся в одном файле. На момент написания статьи [количество вариативных шрифтов](https://www.paratype.ru/catalog?other%5B0%5D%5Bcode%5D=variable&sortType=bestsellers) ограничено, но их количество будет только возрастать.

Вариативные шрифты обладают рядом интересных и полезных свойств, которые более подробно рассмотрены в [статье](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide#variable_fonts).


## «Родные» шрифты в Bootstrap - <small>стек системных шрифтов</small>

В документации Bootstrap информация стеке системных шрифтов приведена в разделе Reboot. См. документацию Bootstrap: Reboot » [Native font stack](https://getbootstrap.com/docs/5.0/content/reboot/#native-font-stack).

Здесь говориться, что для оптимальной отрисовки текста на всех устройствах и ОС Bootstrap использует «стек собственных шрифтов», а точнее - «стек системных шрифтов». Также подчеркивается, что системные шрифты разработаны специально для современных устройств с улучшенным отображением на экранах, поддержкой переменных шрифтов и многим другим. Подробнее - см. статью [Using UI System Fonts In Web Design: A Quick](https://www.smashingmagazine.com/2015/11/using-system-ui-fonts-practical-guide/) опубликованную в журнале [Practical Guide](https://www.smashingmagazine.com/2015/11/) в ноябре 2015 года (в части подходов (approach) - статья не утратила актуальности).

Далее приводится фрагмент исходного кода с пояснениями, где применяется шрифт.

```js
$font-family-sans-serif:
  // Cross-platform generic font family (default user interface font)
  system-ui,
  // Safari for macOS and iOS (San Francisco)
  -apple-system,
  // Windows
  "Segoe UI",
  // Android
  Roboto,
  // Basic web fallback
  "Helvetica Neue", Arial,
  // Linux
  "Noto Sans",
  "Liberation Sans",
  // Sans serif fallback
  sans-serif,
  // Emoji fonts
  "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !default;
```

Следует обратить внимание, что стек шрифтов включает шрифты, поддерживающие эмодзи. Поэтому обычные юникодовские symbol/dingbat отображаются в виде разноцветных пиктограмм. Их внешний вид будет варьироваться в зависимости от стиля, используемого в собственном шрифте emoji браузера (платформы), и на них не будут влиять никакие стили CSS свойства `color:`.

Note that because the font stack includes emoji fonts, many common symbol/dingbat unicode characters will be rendered as multi-colored pictographs. Their appearance will vary, depending on the style used in the browser/platform’s native emoji font, and they won’t be affected by any CSS color styles.

font-family применяется к <body> и автоматически наследуется глобально через Bootstrap. Чтобы переключить глобально font-family, обновите \$font-family-base и перекомпилируйте Bootstrap.
